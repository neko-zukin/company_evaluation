<html>
<head>
	<meta charset="UTF-8">
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="DB_sql.js"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<h1>çµ¦ä¸ãƒ†ãƒ¼ãƒ–ãƒ«</h1>
	<table border="1" id="salary_tb">
		<tr>
			<th rowspan="2">ğŸ˜</th>
			<th colspan="2">ãƒ¬ãƒ™ãƒ«1</th>
			<th colspan="3">ãƒ¬ãƒ™ãƒ«2</th>
			<th colspan="3">ãƒ¬ãƒ™ãƒ«3</th>
			<th colspan="3">ãƒ¬ãƒ™ãƒ«4</th>
			<th colspan="3">ãƒ¬ãƒ™ãƒ«5</th>
			<th rowspan="2">ğŸ˜</th>
		</tr>
		<tr class="tr2">
			<th>å¿…è¦pt</th>
			<th class="money">æœˆçµ¦</th>
			<th>å¿…è¦pt</th>
			<th>Expt</th>
			<th class="money">æœˆçµ¦</th>
			<th>å¿…è¦pt</th>
			<th>Expt</th>
			<th class="money">æœˆçµ¦</th>
			<th>å¿…è¦pt</th>
			<th>Expt</th>
			<th class="money">æœˆçµ¦</th>
			<th>å¿…è¦pt</th>
			<th>Expt</th>
			<th class="money">æœˆçµ¦</th>
		</tr>
	</table>

	<div class="salary_bottom">
		<div>
			<label>â€»æ„›çŸ¥çœŒæœ€ä½è³ƒé‡‘2021å¹´10æœˆ</label>
			<table border="1">
				<tr>
					<th>æ™‚é–“çµ¦</th>
					<td colspan="2" id="min_money"></td>
				</tr>
				<tr>
					<th>æ—¥çµ¦</th>
					<td id="day_money"></td>
					<td>â€»8æ™‚é–“åŠ´åƒ</td>
				</tr>
				<tr>
					<th>æœˆçµ¦</th>
					<td id="month_money"></td>
					<td>â€»20æ—¥160æ™‚é–“</td>
				</tr>
			</table>
		</div>
		<table border="1" class="level_tb">
			<tr>
				<th>å½¹è·æ‰‹å½“</th>
				<th>æœˆé¡</th>
				<th>æ¡ä»¶</th>
			</tr>
			<tr>
				<td>ä¸»ä»»</td>
				<td>10,000</td>
				<td>â˜…â˜…â˜…ã€€ã€€ã€€ä»¥ä¸Š</td>
			</tr>
			<tr>
				<td>ä¿‚é•·</td>
				<td>40,000</td>
				<td>â˜…â˜…â˜…â˜…ã€€ã€€ä»¥ä¸Š</td>
			</tr>
			<tr>
				<td>èª²é•·(ä»£ç†å«ã‚€)</td>
				<td>70,000</td>
				<td>â˜…â˜…â˜…â˜…ã€€ã€€ä»¥ä¸Š</td>
			</tr>
			<tr>
				<td>æ¬¡é•·</td>
				<td>100,000</td>
				<td>â˜…â˜…â˜…â˜…â˜…ã€€ä»¥ä¸Š</td>
			</tr>
			<tr>
				<td>éƒ¨é•·</td>
				<td>100,000</td>
				<td>â˜…â˜…â˜…â˜…â˜…ã€€ä»¥ä¸Š</td>
			</tr>
		</table>
	</div>
	<button id="back_button">æˆ»ã‚‹</button>
</body>
<script>
	// æœ€ä½è³ƒé‡‘ãƒ†ãƒ¼ãƒ–ãƒ«
	let db_min = DB.sql("SELECT * FROM TM_min_money");
	let min_m = db_min[0]["min_money"];
	let mon_m = min_m * 160;
	$("#min_money").text(parseInt(min_m).toLocaleString());
	$("#day_money").text(parseInt(min_m*8).toLocaleString());
	$("#month_money").text(parseInt(mon_m).toLocaleString());

	// DBã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹çµ¦ä¸ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¡¨ç¤º
	let L1 = DB.sql('SELECT * FROM TM_salary WHERE cl_rank="L1";');
	let L2 = DB.sql('SELECT * FROM TM_salary WHERE cl_rank="L2";');
	let L3 = DB.sql('SELECT * FROM TM_salary WHERE cl_rank="L3";');
	let L4 = DB.sql('SELECT * FROM TM_salary WHERE cl_rank="L4";');
	let L5 = DB.sql('SELECT * FROM TM_salary WHERE cl_rank="L5";');

	for(let i=0; i<L1.length; i++){
		$("#salary_tb").append('<tr id="tr'+i+'"></tr>');
		$("#tr"+i).append('<td class="class">'+(i+1)+'ç­‰ç´š</td>');
		min_sal(i, L1[i]);
		min_sal(i, L2[i]);
		min_sal(i, L3[i]);
		min_sal(i, L4[i]);
		min_sal(i, L5[i]);
		$("#tr"+i).append('<td class="class">'+(i+1)+'ç­‰ç´š</td>');
	}

	// æœ€ä½è³ƒé‡‘ä»¥ä¸‹ã®çµ¦ä¸ã®èƒŒæ™¯è‰²ã‚’ã‚°ãƒ¬ãƒ¼ã«ã™ã‚‹
	function min_sal(i, ary){
		if(ary["cl_rank"] == "L1"){
			// ãƒ¬ãƒ™ãƒ«1ã®å ´åˆ
			if(ary["salary"] < mon_m){
				// çµ¦ä¸ãŒæœ€ä½è³ƒé‡‘ä»¥ä¸‹ã®å ´åˆ
				$("#tr"+i).append('<td class="min_s">'+ary["pt"]+'</td>');
				$("#tr"+i).append('<td class="min_s">'+parseInt(ary["salary"]).toLocaleString()+'</td>');
			}else{
				// çµ¦ä¸ãŒæœ€ä½è³ƒé‡‘ä»¥ä¸Šã®å ´åˆ
				$("#tr"+i).append('<td>'+ary["pt"]+'</td>');
				$("#tr"+i).append('<td>'+parseInt(ary["salary"]).toLocaleString()+'</td>');
			}
		}else{
			// ãƒ¬ãƒ™ãƒ«1ä»¥ä¸Šã®å ´åˆ
			if(ary["salary"] < mon_m){
				// çµ¦ä¸ãŒæœ€ä½è³ƒé‡‘ä»¥ä¸‹ã®å ´åˆ
				$("#tr"+i).append('<td class="min_s">'+ary["pt"]+'</td>');
				$("#tr"+i).append('<td class="min_s">'+ary["Expt"]+'</td>');
				$("#tr"+i).append('<td class="min_s">'+parseInt(ary["salary"]).toLocaleString()+'</td>');
			}else{
				// çµ¦ä¸ãŒæœ€ä½è³ƒé‡‘ä»¥ä¸Šã®å ´åˆ
				$("#tr"+i).append('<td>'+ary["pt"]+'</td>');
				$("#tr"+i).append('<td>'+ary["Expt"]+'</td>');
				$("#tr"+i).append('<td>'+parseInt(ary["salary"]).toLocaleString()+'</td>');
			}
		}
	}
	



	// æˆ»ã‚‹ãƒœã‚¿ãƒ³æŠ¼ä¸‹æ™‚
	$("#back_button").on("click",function(){
		location.href='ev_select.html'
	});
</script>
</html>

